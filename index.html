<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dev & Helper Toolkit — TRON</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#000; color:#0ff; padding:20px; display:flex; flex-direction:column; align-items:center; }
    .container{max-width:1100px;width:100%;}
    header{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;color:#0ff;}
    .grid{display:grid;grid-template-columns:260px 1fr;gap:18px;}
    aside{background:#111;padding:12px;border-radius:10px;box-shadow:0 4px 8px rgba(0,255,255,0.2);}
    main{background:#111;padding:16px;border-radius:10px;box-shadow:0 4px 8px rgba(0,255,255,0.2);}
    button{cursor:pointer;color:#000;background:#0ff;border:none;border-radius:6px;padding:6px 12px;font-weight:bold;}
    input, textarea, select {width:100%;padding:8px;border-radius:6px;border:1px solid #0ff;background:#000;color:#0ff;box-sizing:border-box;}
    textarea {resize:vertical}
    .tool-section{margin-bottom:14px}
    .panel{margin-top:10px}
    .row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .small{font-size:13px;color:#0aa}
    .muted{color:#055}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>Dev & Helper Toolkit — TRON</h1>
    <div class="small muted">UI: чистый JS, стиль TRON</div>
  </header>

  <div class="grid">
    <aside>
      <div class="tool-section"><strong>Инструменты</strong></div>
      <div class="tool-section"><button onclick="show('json')">JSON</button></div>
      <div class="tool-section"><button onclick="show('regex')">Regex</button></div>
      <div class="tool-section"><button onclick="show('base64')">Base64</button></div>
      <div class="tool-section"><button onclick="show('password')">Пароль / UUID</button></div>
      <div class="tool-section"><button onclick="show('timestamp')">Timestamp</button></div>
      <div class="tool-section"><button onclick="show('lorem')">Lorem / WordCount / Case</button></div>
    </aside>

    <main>
      <!-- JSON -->
      <section id="json" class="panel">
        <h2>JSON Formatter / Validator</h2>
        <div class="row">
          <button onclick="formatJson()">Форматировать</button>
          <button onclick="minifyJson()">Сжать</button>
          <button onclick="copyOutput('json_out')">Копировать</button>
        </div>
        <textarea id="json_in" rows="10" placeholder='{"foo": "bar"}'></textarea>
        <textarea id="json_out" rows="10" readonly placeholder="Результат"></textarea>
      </section>

      <!-- REGEX -->
      <section id="regex" class="panel" style="display:none">
        <h2>Regex Tester</h2>
        <div class="row">
          <input id="re_pattern" placeholder="паттерн, напр. (\d+)" />
          <input id="re_flags" placeholder="flags, напр. gi" style="width:120px" />
          <button onclick="runRegex()">Запустить</button>
        </div>
        <textarea id="re_text" rows="6" placeholder="Тестовая строка"></textarea>
        <div id="re_result" style="margin-top:8px"></div>
      </section>

      <!-- BASE64 -->
      <section id="base64" class="panel" style="display:none">
        <h2>Base64 Encode / Decode</h2>
        <div class="row">
          <button onclick="b64encode()">Encode</button>
          <button onclick="b64decode()">Decode</button>
          <button onclick="copyOutput('b64_out')">Копировать</button>
        </div>
        <textarea id="b64_in" rows="6" placeholder="Текст или Base64"></textarea>
        <textarea id="b64_out" rows="4" readonly placeholder="Результат"></textarea>
      </section>

      <!-- PASSWORD / UUID -->
      <section id="password" class="panel" style="display:none">
        <h2>Генератор паролей / UUID</h2>
        <div class="row">
          <input id="pw_len" type="number" value="16" style="width:90px" />
          <label class="small">Symbols <input id="pw_sym" type="checkbox" checked /></label>
          <button onclick="genPassword()">Сгенерировать</button>
          <button onclick="genUUID()">UUID</button>
          <button onclick="copyOutput('pw_out')">Копировать</button>
        </div>
        <input id="pw_out" readonly />
      </section>

      <!-- TIMESTAMP -->
      <section id="timestamp" class="panel" style="display:none">
        <h2>Timestamp Converter</h2>
        <div class="row">
          <input id="ts_in" placeholder="1697049600 или 1697049600000 или 2023-10-11T00:00:00Z" />
          <button onclick="convTimestamp()">Конвертировать</button>
          <button onclick="clearTimestamp()">Очистить</button>
        </div>
        <textarea id="ts_out" rows="3" readonly></textarea>
      </section>

      <!-- LOREM / WORDCOUNT / CASE -->
      <section id="lorem" class="panel" style="display:none">
        <h2>Lorem / Word Count / Case</h2>
        <div class="row">
          <input id="lorem_par" type="number" value="1" style="width:70px" />
          <button onclick="makeLorem()">Создать</button>
          <button onclick="clearLorem()">Очистить</button>
        </div>
        <textarea id="lorem_out" rows="4" readonly></textarea>
      </section>

    </main>
  </div>
</div>

<script>
function show(id){
  document.querySelectorAll('.panel').forEach(p => p.style.display='none');
  document.getElementById(id).style.display='block';
}
show('json');

// --- JSON ---
function formatJson(){
  const inTxt=document.getElementById('json_in').value;
  try{ document.getElementById('json_out').value=JSON.stringify(JSON.parse(inTxt), null,2);}
  catch(e){document.getElementById('json_out').value='Error: '+e.message;}
}
function minifyJson(){
  const inTxt=document.getElementById('json_in').value;
  try{ document.getElementById('json_out').value=JSON.stringify(JSON.parse(inTxt)); }
  catch(e){document.getElementById('json_out').value='Error: '+e.message;}
}

// --- Regex ---
function runRegex(){
  const pat=document.getElementById('re_pattern').value;
  const flags=document.getElementById('re_flags').value;
  const text=document.getElementById('re_text').value;
  try{
    const r=new RegExp(pat,flags); let out=[];
    if(r.global){let m; while((m=r.exec(text))!==null){out.push({match:m[0], index:m.index, groups:m.slice(1)}); if(m.index===r.lastIndex) r.lastIndex++;}}
    else {const m=r.exec(text); if(m) out.push({match:m[0], index:m.index, groups:m.slice(1)});}
    document.getElementById('re_result').innerText=out.length?JSON.stringify(out,null,2):'Ничего не найдено';
  }catch(e){document.getElementById('re_result').innerText='Error: '+e.message;}
}

// --- Base64 ---
function b64encode(){try{document.getElementById('b64_out').value=btoa(unescape(encodeURIComponent(document.getElementById('b64_in').value)));}catch(e){document.getElementById('b64_out').value='Error: '+e.message;}}
function b64decode(){try{document.getElementById('b64_out').value=decodeURIComponent(escape(atob(document.getElementById('b64_in').value.trim())));}catch(e){document.getElementById('b64_out').value='Error: '+e.message;}}

// --- Password / UUID ---
function genPassword(){const len=Number(document.getElementById('pw_len').value)||16; const useSym=document.getElementById('pw_sym').checked; const lower='abcdefghijklmnopqrstuvwxyz'; const upper=lower.toUpperCase(); const nums='0123456789'; const syms='!@#$%^&*()-_=+[]{};:,.<>/?'; let chars=lower+upper+nums+(useSym?syms:''); let res=''; try{const rnd=crypto.getRandomValues(new Uint32Array(len)); for(let i=0;i<len;i++) res+=chars[rnd[i]%chars.length];}catch(e){for(let i=0;i<len;i++) res+=chars[Math.floor(Math.random()*chars.length)];}document.getElementById('pw_out').value=res;}
function genUUID(){try{const arr=crypto.getRandomValues(new Uint8Array(16)); arr[6]=(arr[6]&0x0f)|0x40; arr[8]=(arr[8]&0x3f)|0x80; const hex=Array.from(arr).map(b=>b.toString(16).padStart(2,'0')).join(''); document.getElementById('pw_out').value=hex.slice(0,8)+'-'+hex.slice(8,12)+'-'+hex.slice(12,16)+'-'+hex.slice(16,20)+'-'+hex.slice(20);}catch(e){document.getElementById('pw_out').value='Error: '+e.message;}}

// --- Timestamp ---
function convTimestamp(){const v=document.getElementById('ts_in').value.trim(); if(!v)return; if(/^-?\d+$/.test(v)){const n=Number(v); const date=Math.abs(n)>1e12?new Date(n):new Date(n*1000); document.getElementById('ts_out').value=isNaN(date.getTime())?'Invalid numeric timestamp':date.toString()+' — '+Math.floor(date.getTime()/1000)+' (s)'; return;} const d=new Date(v); document.getElementById('ts_out').value=isNaN(d.getTime())?'Invalid date string':d.toString()+' — '+Math.floor(d.getTime()/1000)+' (s)';}
function clearTimestamp(){document.getElementById('ts_in').value=''; document.getElementById('ts_out').value='';}

// --- Lorem ---
function makeLorem(){const p=Math.max(1,Math.min(10,Number(document.getElementById('lorem_par').value)||1)); const base="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam."; document.getElementById('lorem_out').value=Array.from({length:p}).map(()=>base).join('\n\n');}
function clearLorem(){document.getElementById('lorem_out').value='';}

// --- Utils ---
function copyOutput(id){const el=document.getElementById(id); if(!el)return; if(el.select) el.select(); try{navigator.clipboard.writeText(el.value||el.innerText||''); alert('Скопировано');}catch(e){alert('Не удалось скопировать: '+e.message);}
}
</script>
</body>
</html>
